<!DOCTYPE html>
<html>
<head>
   <title>Edit Customers</title>
   <style>
       /* Centering the table horizontally */
       .table-container {
           margin-bottom: 20px; /* Add margin-bottom to create a gap */
       }

       table {
           margin-left: auto;
           margin-right: auto;
       }

       /* Other CSS styles for the table */
       th, td {
           border: 1px solid #dddddd;
           text-align: left;
           padding: 8px;
       }

       tr:nth-child(even) {
           background-color: #f2f2f2;
       }

       .description {
           max-width: 300px;
           overflow: hidden;
           text-overflow: ellipsis;
           white-space: nowrap;
       }

       .btn-edit {
           background-color: #007bff;
           color: #fff;
           border: none;
           padding: 5px 10px;
           border-radius: 5px;
           cursor: pointer;
       }

       .btn-delete {
           background-color: #dc3545;
           color: #fff;
           border: none;
           padding: 5px 10px;
           border-radius: 5px;
           cursor: pointer;
       }
   </style>
</head>
<body>
   <h4><strong>This will be the CRUD Page for ADMINS ONLY that will be able to edit Customers</strong></h4>
   <a class="btn-add" href="@Url.Action("AddCustomers", "Brian1")">Add Customers</a>

   <div class="table-container">
       <table>
           <thead>
           <tr>
               <th>Customer ID</th>
               <th>First Name</th>
               <th>Last Name</th>
               <th>Birth Date</th>
               <th>Country of Residence</th>
               <th>Gender</th>
               <th>Age</th>
               <th>Actions</th> <!-- New column for buttons -->
           </tr>
           </thead>
           <tbody>
           @foreach (var customer in Model ?? Enumerable.Empty<Customers>())
           {
           <tr>
               <td>@(customer.customer_ID)</td>
               <td>@(customer.first_Name)</td>
               <td>@(customer.last_Name)</td>
               <td>@(customer.birth_date)</td>
               <td>@(customer.country_of_Residence)</td>
               <td>@(customer.gender)</td>
               <td>@(customer.age)</td>
               <td>
                   <!-- Delete button with confirmation dialog -->
                   <button type="button" class="btn-delete" onclick="confirmDelete('@customer.first_Name', '@customer.customer_ID')">Delete</button>
                   <!-- Link to route to UpdateCustomers action with customer ID -->
                   <a class="btn-edit" href="@Url.Action("UpdateCustomers", "Brian1", new { id = customer.customer_ID })">Edit</a>
               </td>
           </tr>
           }
           </tbody>
       </table>
   </div>
   <br/><br/><br/><br/><br/>

   <!-- JavaScript to handle the confirmation dialog -->
   <script>
       function confirmDelete(customerName, id) {
           // Show a confirmation dialog
           if (confirm("Are you sure you want to delete " + customerName + "?")) {
               // If user confirms, submit the form
               var form = document.createElement("form");
               form.method = "post";
               form.action = "@Url.Action("DeleteCustomers", "Brian1")";
              
               // Create a hidden input field to pass the customer ID
               var hiddenInput = document.createElement("input");
               hiddenInput.type = "hidden";
               hiddenInput.name = "id";
               hiddenInput.value = id;
              
               // Append the hidden input field to the form
               form.appendChild(hiddenInput);
              
               // Append the form to the document body and submit it
               document.body.appendChild(form);
               form.submit();
           } else {
               // If user cancels, do nothing
               return false;
           }
       }
   </script>
</body>
</html>
